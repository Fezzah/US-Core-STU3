<?xml version="1.0" encoding="UTF-8"?>
<StructureDefinition xmlns="http://hl7.org/fhir">
	<id value="us-core-observationresults"/>
	<url value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-observationresults"/>
	<version value="1.1.0"/>
	<name value="US__Core_Results_Profile"/>
	<title value="US  Core Results Profile"/>
	<status value="draft"/>
	<date value="2016-08-01"/>
	<publisher value="HL7 US Realm Steering Committee"/>
	<contact>
		<telecom>
			<system value="url"/>
			<value value="http://www.healthit.gov"/>
		</telecom>
	</contact>
	<description value="Defines constraints and extensions on the Observation resource for the minimal set of data to query and retrieve Result information."/>
	<jurisdiction>
		<coding>
			<system value="urn:iso:std:iso:3166"/>
			<code value="US"/>
			<display value="United States"/>
		</coding>
	</jurisdiction>
	<fhirVersion value="3.0.1"/>
	<mapping>
		<identity value="argonaut-dq-dstu2"/>
		<uri value="http://unknown.org/Argonaut-DQ-DSTU2"/>
		<name value="Argonaut-DQ-DSTU2"/>
	</mapping>
	<mapping>
		<identity value="workflow"/>
		<uri value="http://hl7.org/fhir/workflow"/>
		<name value="Workflow Mapping"/>
	</mapping>
	<mapping>
		<identity value="sct-concept"/>
		<uri value="http://snomed.info/conceptdomain"/>
		<name value="SNOMED CT Concept Domain Binding"/>
	</mapping>
	<mapping>
		<identity value="sct-attr"/>
		<uri value="http://snomed.info/sct"/>
		<name value="SNOMED CT Attribute Binding"/>
	</mapping>
	<kind value="resource"/>
	<abstract value="false"/>
	<type value="Observation"/>
	<baseDefinition value="http://hl7.org/fhir/StructureDefinition/Observation"/>
	<derivation value="constraint"/>
	<differential>
		<element id="Observation">
			<path value="Observation"/>
			<short value="US Core Result Observation"/>
			<definition value="The US Core Observation Result Profile is based upon the core FHIR Observation Resource and created to meet the 2015 Edition Common Clinical Data Set 'Laboratory test(s) and Laboratory value(s)/result(s)' requirements."/>
			<alias value="Obs"/>
			<constraint>
				<key value="us-core-2"/>
				<severity value="error"/>
				<human value="If there is no component or related element then either a value[x] or a data absent reason must be present"/>
				<expression value="(component.empty() and related.empty()) implies (dataAbsentReason or value)"/>
				<xpath value="exists(f:component) or exists(f:related) or exists(f:*[starts-with(local-name(.), 'value)]) or exists(f:dataAbsentReason)"/>
			</constraint>
			<mustSupport value="false"/>
			<mapping>
				<identity value="argonaut-dq-dstu2"/>
				<map value="Observation"/>
			</mapping>
		</element>
		<element id="Observation.status">
			<path value="Observation.status"/>
			<min value="1"/>
			<max value="1"/>
			<type>
				<code value="code"/>
			</type>
			<mustSupport value="true"/>
			<binding>
				<strength value="required"/>
				<valueSetReference>
					<reference value="http://hl7.org/fhir/ValueSet/observation-status"/>
				</valueSetReference>
			</binding>
			<mapping>
				<identity value="argonaut-dq-dstu2"/>
				<map value="Observation.status"/>
			</mapping>
		</element>
		<element id="Observation.category">
			<path value="Observation.category"/>
			<min value="1"/>
			<max value="*"/>
			<type>
				<code value="CodeableConcept"/>
			</type>
			<constraint>
				<key value="us-core-5"/>
				<severity value="error"/>
				<human value="Must have a category of 'laboratory' and a code system 'http://hl7.org/fhir/observation-category'"/>
				<expression value="where(coding.system='http://hl7.org/fhir/observation-category' and coding.code='laboratory').exists()"/>
				<xpath value="exists(f:coding/code[@value='laboratory']) and exists(f:coding/system[@value='http://hl7.org/fhir/observation-category'])"/>
			</constraint>
			<mustSupport value="true"/>
			<mapping>
				<identity value="argonaut-dq-dstu2"/>
				<map value="Observation.category"/>
			</mapping>
		</element>
		<element id="Observation.code">
			<path value="Observation.code"/>
			<short value="Laboratory Test Name"/>
			<definition value="The test that was performed.  A LOINC **SHALL** be used if the concept is present in LOINC."/>
			<comment value="The typical patterns for codes are:  1)  a LOINC code either as a  translation from a &quot;local&quot; code or as a primary code, or 2)  a local code only if no suitable LOINC exists,  or 3)  both the local and the LOINC translation.   Systems SHALL be capable of sending the local code if one exists.  When using LOINC , Use either the SHORTNAME or LONG_COMMON_NAME field for the display."/>
			<alias value="Test Name"/>
			<alias value="Observation Identifer"/>
			<min value="1"/>
			<max value="1"/>
			<type>
				<code value="CodeableConcept"/>
			</type>
			<mustSupport value="true"/>
			<binding>
				<strength value="extensible"/>
				<description value="LOINC codes"/>
				<valueSetReference>
					<reference value="http://hl7.org/fhir/ValueSet/observation-codes"/>
				</valueSetReference>
			</binding>
			<mapping>
				<identity value="argonaut-dq-dstu2"/>
				<map value="Observation.code"/>
			</mapping>
		</element>
		<element id="Observation.subject">
			<path value="Observation.subject"/>
			<min value="1"/>
			<max value="1"/>
			<type>
				<code value="Reference"/>
				<targetProfile value="http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient"/>
			</type>
			<mustSupport value="true"/>
			<mapping>
				<identity value="argonaut-dq-dstu2"/>
				<map value="Observation.subject"/>
			</mapping>
		</element>
		<element id="Observation.effective[x]">
			<path value="Observation.effective[x]"/>
			<definition value="For lab tests this is the specimen collection date.  For Ask at Order Entry Questions (AOE)'s this is the date the question was asked."/>
			<min value="0"/>
			<max value="1"/>
			<type>
				<code value="dateTime"/>
			</type>
			<type>
				<code value="Period"/>
			</type>
			<constraint>
				<key value="us-core-1"/>
				<severity value="error"/>
				<human value="Datetime must be at least to day."/>
				<expression value="($this as dateTime).toString().length() &gt;= 8"/>
				<xpath value="f:matches(effectiveDateTime,/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)/)"/>
			</constraint>
			<mustSupport value="true"/>
			<mapping>
				<identity value="argonaut-dq-dstu2"/>
				<map value="Observation.effective[x]"/>
			</mapping>
		</element>
		<element id="Observation.value[x]">
			<path value="Observation.value[x]"/>
			<short value="Result Value"/>
			<definition value="The Laboratory result value.  If a coded value,  the valueCodeableConcept.code **SHOULD**  be selected from [SNOMED CT](http://hl7.org/fhir/ValueSet/uslab-obs-codedresults).  If a numeric value, valueQuantity.code **SHALL** be selected from [UCUM](http://unitsofmeasure.org).  A FHIR [UCUM Codes value set](http://hl7.org/fhir/STU3/valueset-ucum-units.html) that defines all UCUM codes is in the FHIR specification."/>
			<min value="0"/>
			<max value="1"/>
			<constraint>
				<extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-bestpractice">
					<valueBoolean value="true"/>
				</extension>
				<key value="us-core-4"/>
				<severity value="warning"/>
				<human value="SHOULD use Snomed CT for coded Results"/>
				<expression value="valueCodeableConcept.coding.system.empty() or valueCodeableConcept.coding.system = 'http://snomed.info/sct'"/>
				<xpath value="not(exists(f:valueCodeableConcept/f:coding/f:system) ) or  f:valueCodeableConcept/f:coding/f:system[@value='http://snomed.info/sct']"/>
			</constraint>
			<constraint>
				<key value="us-core-3"/>
				<severity value="error"/>
				<human value="SHALL use UCUM for coded quantity units."/>
				<expression value="valueQuantity.system.empty() or valueQuantity.system = 'http://unitsofmeasure.org'"/>
				<xpath value="not(exists(f:valueQuantity/f:system) ) or  f:valueQuantity/f:system[@value='http://unitsofmeasure.org']"/>
			</constraint>
			<mustSupport value="true"/>
			<mapping>
				<identity value="argonaut-dq-dstu2"/>
				<map value="Observation.value[x]"/>
			</mapping>
		</element>
		<element id="Observation.dataAbsentReason">
			<path value="Observation.dataAbsentReason"/>
			<min value="0"/>
			<max value="1"/>
			<type>
				<code value="CodeableConcept"/>
			</type>
			<mustSupport value="true"/>
			<binding>
				<strength value="extensible"/>
				<valueSetReference>
					<reference value="http://hl7.org/fhir/ValueSet/observation-valueabsentreason"/>
				</valueSetReference>
			</binding>
			<mapping>
				<identity value="argonaut-dq-dstu2"/>
				<map value="Observation.dataAbsentReason"/>
			</mapping>
		</element>
	</differential>
</StructureDefinition>